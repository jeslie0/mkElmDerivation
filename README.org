#+title: mkElmDerivation
This project is an attempt to provide a way to package elm applications with nix, with less user input required than the standard [[https://github.com/cachix/elm2nix][elm2nix]]. This project is based heavily on elm2nix and wouldn't be possible without it. There should be no need to generate any nix files using elm2nix, and no updates required when installing a new elm package. The nix expression is generated on the fly from the given =elm.json= file.

The flake provides a function =mkElmDerivation= which will build an elm project. It takes the following attribute set as an input:

#+begin_src nix
{ # Optional: The name of the elm project. Read from "name" key in
  # elm.json if not specified.
  pname

# Optional: The version of the elm projec. Read from "version" key in
# elm.json if not specified.
, version

# The nixpkgs to use (typically of the form
# nixpkgs.legacyPackages.${system}).
, nixpkgs

# The base directory of your elm project (most likely ./.).
, src

# Optional: The elm projects elm.json file. Will default to
# ${src}/elm.json
, elmJson

# Optional: The nix expression containing the elm projects dependency
# names, versions and SHA256 hashes. This will be generated
# automatically, but can be ready from a file generated by
# elm2nix convert. This must be a nix expression, not a file, so to
# use an existing nix expression, set this equal to
# (import ./elm-srcs.nix).
, elmPackages

# Optional: The directory containing the .elm files to
# compile. Currently, we only support using one directory.
, srcdir

# Optional: The version of elm used. Read from elm.json file.
, elmVersion

# Optional: The files in srcdir to compile.
, targets

# Optional: The output of elm2nix snapshot. There is a copy of this
# file with this repository which is used by default.
, registryDat

# Optional: Should the outputted files by JavaScript or HTML? Defaults
# as false (HTML output).
, outputJavaScript
}
#+end_src

This project is in alpha and there may be breaking changes in the future.
